<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="utf-8">
  <title>Jasmine Spec Runner v2.4.1</title>
  <base href=".."/> 

  <link rel="shortcut icon" type="image/png" href="node_modules/jasmine-core/images/jasmine_favicon.png">
  <link rel="stylesheet" href="node_modules/jasmine-core/lib/jasmine-core/jasmine.css">

  <script src="node_modules/jasmine-core/lib/jasmine-core/jasmine.js"></script>
  <script src="node_modules/jasmine-core/lib/jasmine-core/jasmine-html.js"></script> 
  <script src="node_modules/jasmine-core/lib/jasmine-core/boot.js"></script> 


  <!-- systemjs -->
  <script src="node_modules/systemjs/dist/system.src.js"></script>
  <script src="app/systemjs/systemjs-static-es5.config.js"></script>

</head>

<body>
  <dome-narrative id='narrative'>Loading...</dome-narrative>


  <!-- import test-spec modules -->
  <script>
    "use strict";

    System.import('node_modules/reflect-metadata/Reflect.js')
      .then((M) => {
        console.log(`M = ${M}`);
      })
      .catch((e) => {
        console.log(`import of reflect-metadata caused error: ${e}`);
      });

    // load all test-modules
    Promise.all(
    [
    ].map(x => System.import(x)))
    .then((modules) => {
      var p,q;
      console.log('test modules loaded and running...');
      console.log(`modules is array? = ${Array.isArray(modules)}`);
      console.log(`running main test-function in each module`);
      for(var p in modules){
        console.log(`modules has property ${p}`);
        for(var q in modules[p]){
          console.log(`modules[${p}] has property ${q}`);
        }
        modules[p][q]();
      }
      // manually trigger jasmine tests
      window.onload();
     })
    .catch((e) => {
        console.log(`import of test modules caused error: ${e}`);
    });
  </script>

</body>
</html>
